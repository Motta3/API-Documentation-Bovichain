openapi: 3.1.0
info:
  title: Bovichain API
  version: 1.0.0
  description: |-
    ## Importante (arquivos e imagens)

    Campos do tipo **file/image/anexo** devem receber uma **URL pública**.

    **Fluxo recomendado:**
    1) Faça upload do arquivo no endpoint **`/fileupload`** (multipart/form-data)
    2) Use a **URL retornada** nos campos de foto/assinatura/receita/etc nos demais endpoints.

    Alternativamente, você pode hospedar externamente e enviar a URL pública.
servers:
  - url: https://app.bovichain.com/{version}/api/1.1/wf
    description: Bubble WF endpoints
    variables:
      version:
        default: version-test
  - url: https://app.bovichain.com/{version}
    description: Root endpoints (ex: fileupload)
    variables:
      version:
        default: version-test
security:
  - bearerAuth: []
paths:
  /login:
    post:
      tags:
        - Auth
      summary: Login
      description: Realiza login e retorna token, user_id e tempo de expiração.
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
            examples:
              default:
                summary: Credenciais do usuário
                value:
                  email: user@example.com
                  senha: sua_senha_aqui
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LoginResponse"

  /delete_animal:
    post:
      tags:
        - Animais
      summary: Deletar animal
      description: Remove um animal. Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DeleteAnimalRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeleteAnimalResponse"

  /editar_animal:
    post:
      tags:
        - Animais
      summary: Editar animal
      description: Edita campos do animal (a maioria opcional). Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EditarAnimalRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EditarAnimalResponse"

  /adicionar-bioid:
    post:
      tags:
        - Animais
      summary: Adicionar BioID ao animal
      description: Associa um BioID a um animal. Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/AdicionarBioidRequest"
      responses:
        "200":
          description: OK
          content:
            text/plain:
              schema:
                type: string
              examples:
                bioidAdicionado:
                  summary: Quando adiciona com sucesso
                  value: BioID adicionado no animal
                jaPossuiBioid:
                  summary: Quando o animal já possui BioID
                  value: Animal já possui bioid

  /cadastrar-animal-qr:
    post:
      tags:
        - Animais
      summary: Cadastrar animal
      description: Cadastra um animal na fazenda informada. Campos base são obrigatórios; campos extras podem ser opcionais conforme workflow.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/CadastrarAnimalRequest"
      responses:
        "200":
          description: OK
          content:
            text/plain:
              schema:
                type: string
              examples:
                success:
                  value: Animal cadastrado

  /get-animais:
    get:
      tags:
        - Animais
      summary: Buscar animais
      description: Retorna os animais. Os parâmetros `fazenda`, `animal` e `brinco_padrao` são opcionais e podem ser usados como filtros.
      parameters:
        - in: query
          name: fazenda
          required: false
          schema:
            type: string
          description: ID da fazenda para filtrar (opcional)
        - in: query
          name: animal
          required: false
          schema:
            type: string
          description: "Animal (Bubble type: animal) - ID (opcional)"
        - in: query
          name: brinco_padrao
          required: false
          schema:
            type: string
          description: Brinco padrão (texto) para filtrar (opcional)
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuscarAnimaisResponse"

  /fileupload:
    post:
      tags:
        - Arquivos
      summary: Upload de arquivo
      description: Faz upload de um arquivo (multipart/form-data) e retorna a URL do arquivo enviado.
      servers:
        - url: https://app.bovichain.com/{version}
          description: Root endpoint for fileupload
          variables:
            version:
              default: version-test
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/FileUploadRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FileUploadResponse"

  /buscar_colaboradores:
    get:
      tags:
        - Colaboradores
      summary: Buscar colaboradores
      description: Retorna colaboradores de uma fazenda. Requer autenticação Bearer.
      parameters:
        - in: query
          name: fazenda
          required: false
          schema:
            type: string
          description: "Fazenda (Bubble type: fazenda) - ID"
        - in: query
          name: colaborador
          required: false
          schema:
            type: string
          description: "Colaborador (Bubble type: colaboradores) - ID (opcional)"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuscarColaboradoresResponse"

  /get-fazendas:
    get:
      tags:
        - Fazendas
      summary: Buscar fazendas
      description: Retorna as fazendas vinculadas ao usuário/autorização.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetFazendasResponse"

  /aplicar_medicamento:
    post:
      tags:
        - Medicamentos
      summary: Aplicar medicamento
      description: Registra a aplicação de um medicamento. Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AplicarMedicamentoRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AplicarMedicamentoResponse"

  /atualizar_medicamento:
    post:
      tags:
        - Medicamentos
      summary: Atualizar medicamento
      description: Atualiza um registro de medicamento. Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AtualizarMedicamentoRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AtualizarMedicamentoResponse"

  /buscar_medicamentos:
    get:
      tags:
        - Medicamentos
      summary: Buscar medicamentos
      description: Retorna os medicamentos cadastrados. Requer autenticação Bearer.
      parameters:
        - in: query
          name: fazenda
          required: false
          schema:
            type: string
          description: "Fazenda (Bubble type: fazenda) - ID"
        - in: query
          name: animal
          required: false
          schema:
            type: string
          description: "Animal (Bubble type: animal) - ID (opcional)"
        - in: query
          name: medicamento
          required: false
          schema:
            type: string
          description: "Medicamento (Bubble type: medicamento) - ID (opcional)"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuscarMedicamentosResponse"

  /cancelar_medicamento:
    post:
      tags:
        - Medicamentos
      summary: Cancelar medicamento
      description: Cancela um medicamento. Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CancelarMedicamentoRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CancelarMedicamentoResponse"

  /criar_medicamento:
    post:
      tags:
        - Medicamentos
      summary: Criar medicamento
      description: Cria um registro de medicamento. Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CriarMedicamentoRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CriarMedicamentoResponse"

  /registrar_morte_animal:
    post:
      tags:
        - Morte
      summary: Registrar morte do animal
      description: Registra a morte de um animal.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegistrarMorteRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RegistrarMorteResponse"

  /reverter_morte_animal:
    post:
      tags:
        - Morte
      summary: Reverter registro de morte
      description: Reverte (desfaz) um registro de morte do animal.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ReverterMorteRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReverterMorteResponse"

  /get-finalidade:
    get:
      tags:
        - Option Sets
      summary: Option Set - finalidade
      description: Retorna o Option Set "finalidade". Requer autenticação Bearer.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OptionSetResponse"

  /get-origem:
    get:
      tags:
        - Option Sets
      summary: Option Set - origem
      description: Retorna o Option Set "origem". Requer autenticação Bearer.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OptionSetResponse"

  /get-pureza:
    get:
      tags:
        - Option Sets
      summary: Option Set - pureza
      description: Retorna o Option Set "pureza". Requer autenticação Bearer.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OptionSetResponse"

  /get-raca:
    get:
      tags:
        - Option Sets
      summary: Option Set - raca
      description: Retorna o Option Set "raca". Requer autenticação Bearer.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OptionSetResponse"

  /get-sexo:
    get:
      tags:
        - Option Sets
      summary: Option Set - sexo
      description: Retorna o Option Set "sexo". Requer autenticação Bearer.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OptionSetResponse"

  /get-status-vacina:
    get:
      tags:
        - Option Sets
      summary: Option Set - status vacina
      description: Retorna o Option Set "status vacina". Requer autenticação Bearer.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OptionSetResponse"

  /get-tipo-equipamento:
    get:
      tags:
        - Option Sets
      summary: Option Set - tipo equipamento
      description: Retorna o Option Set "tipo equipamento". Requer autenticação Bearer.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OptionSetResponse"

  /get-tipo-pesagem:
    get:
      tags:
        - Option Sets
      summary: Option Set - tipo pesagem
      description: Retorna o Option Set "tipo pesagem". Requer autenticação Bearer.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OptionSetResponse"

  /get-tipo-vacina:
    get:
      tags:
        - Option Sets
      summary: Option Set - tipo vacina
      description: Retorna o Option Set "tipo vacina". Requer autenticação Bearer.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OptionSetResponse"

  /buscar_pesagens:
    get:
      tags:
        - Pesagem
      summary: Buscar pesagens
      description: Retorna as pesagens cadastradas. O parâmetro `animal` é opcional; quando informado, filtra pelo animal. Requer autenticação Bearer.
      parameters:
        - in: query
          name: animal
          required: false
          schema:
            type: string
          description: "Animal (Bubble type: animal) - ID do animal para filtrar (opcional)"
        - in: query
          name: fazenda
          required: false
          schema:
            type: string
          description: "Fazenda (Bubble type: fazenda) - ID (opcional)"
        - in: query
          name: pesagem
          required: false
          schema:
            type: string
          description: "Pesagem (Bubble type: animal_peso) - ID (opcional)"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuscarPesagensResponse"

  /delete_pesagem:
    post:
      tags:
        - Pesagem
      summary: Deletar pesagem
      description: Remove uma pesagem (animal_peso). Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DeletePesagemRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeletePesagemResponse"

  /editar_animal_peso:
    post:
      tags:
        - Pesagem
      summary: Editar peso do animal
      description: Edita uma pesagem existente. Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EditarAnimalPesoRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EditarAnimalPesoResponse"

  /novo_animal_peso:
    post:
      tags:
        - Pesagem
      summary: Novo peso do animal
      description: Registra uma pesagem para um animal. Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NovoAnimalPesoRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NovoAnimalPesoResponse"

  /aplicar_vacina:
    post:
      tags:
        - Vacina
      summary: Aplicar vacina
      description: Registra a aplicação de uma vacina em um animal.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AplicarVacinaRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AplicarVacinaResponse"

  /buscar_vacinas:
    get:
      tags:
        - Vacina
      summary: Buscar vacinações
      description: Retorna as vacinações cadastradas. Requer autenticação Bearer.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BuscarVacinasResponse"
      parameters:
        - in: query
          name: fazenda
          required: false
          schema:
            type: string
          description: "Fazenda (Bubble type: fazenda) - ID (opcional)"
        - in: query
          name: vacina
          required: false
          schema:
            type: string
          description: "vacinas (Bubble type: vacinacao) - ID (opcional)"
        - in: query
          name: animal
          required: false
          schema:
            type: string
          description: "Animal (Bubble type: animal) - ID (opcional)"

  /delete_vacina:
    post:
      tags:
        - Vacina
      summary: Deletar vacinas
      description: Deleta uma vacinas. Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DeleteVacinaRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeleteVacinaResponse"

  /desaplicar_vacina:
    post:
      tags:
        - Vacina
      summary: Desaplicar vacinas
      description: Desaplica uma vacinas. Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DesaplicarVacinacaoRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DesaplicarVacinacaoResponse"

  /editar_vacina:
    post:
      tags:
        - Vacina
      summary: Editar vacinas
      description: Edita uma vacinas existente. Requer autenticação Bearer.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EditarVacinaRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EditarVacinaResponse"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    LoginRequest:
      type: object
      required:
        - email
        - senha
      properties:
        email:
          type: string
          format: email
        senha:
          type: string
          format: password

    LoginResponse:
      type: object
      required:
        - status
        - response
      properties:
        status:
          type: string
        response:
          type: object
          required:
            - token
            - user_id
            - expires
          properties:
            token:
              type: string
            user_id:
              type: string
            expires:
              type: integer

    GetFazendasResponse:
      type: object
      additionalProperties: true

    BuscarColaboradoresResponse:
      type: object
      additionalProperties: true

    OptionSetResponse:
      type: object
      description: Resposta do Option Set (estrutura fixa do sistema).
      additionalProperties: true

    FileUploadRequest:
      type: object
      required:
        - file
      properties:
        file:
          type: string
          format: binary
          description: Arquivo a ser enviado
      additionalProperties: false

    FileUploadResponse:
      description: Resposta do upload. Pode ser string (URL) ou objeto { url }.
      oneOf:
        - type: string
          format: uri
          description: URL pública do arquivo enviado
        - type: object
          required: [url]
          properties:
            url:
              type: string
              format: uri
          additionalProperties: true

    CadastrarAnimalRequest:
      type: object
      required:
        - fazenda
        - bioid
        - raca
        - sexo
        - tag-principal
      properties:
        fazenda:
          type: string
        bioid:
          type: string
        raca:
          type: string
        sexo:
          type: string
          description: "Sexo do animal (ex.: M/F)"
        tag-principal:
          type: string
        latitude:
          type: string
          nullable: true
        longitude:
          type: string
          nullable: true
        data_cadastro:
          type: string
          format: date
          nullable: true
        foto:
          type: string
          format: uri
          nullable: true
          description: URL pública da imagem (opcional)
      additionalProperties: false

    BuscarAnimaisResponse:
      type: object
      required:
        - quantidade encontrada
        - animais
      properties:
        quantidade encontrada:
          type: integer
        animais:
          type: array
          items:
            $ref: "#/components/schemas/AnimalResumo"
      additionalProperties: false

    AnimalResumo:
      type: object
      required:
        - tag-principal
        - bioid
        - sexo
        - raca
        - id
      properties:
        tag-principal:
          type: string
        bioid:
          type: string
        sexo:
          type: string
        raca:
          type: string
        id:
          type: string
      additionalProperties: false

    AdicionarBioidRequest:
      type: object
      required:
        - animal
        - bioid
      properties:
        animal:
          type: string
          description: ID do animal
        bioid:
          type: string
          description: BioID a ser associado
      additionalProperties: false

    DeleteAnimalRequest:
      type: object
      required:
        - animal
      properties:
        animal:
          type: string
          description: "Animal (Bubble type: animal) - ID"
      additionalProperties: false

    DeleteAnimalResponse:
      type: object
      additionalProperties: true

    EditarAnimalRequest:
      type: object
      required:
        - animal
      properties:
        animal:
          type: string
          description: "Animal (Bubble type: animal) - ID"
        nome:
          type: string
          nullable: true
        fazenda:
          type: string
          nullable: true
        raca:
          type: string
          nullable: true
          description: "Option Set: raca_animal (valor do Option Set)"
        raca_hibrida:
          type: array
          nullable: true
          items:
            type: string
        sex:
          type: string
          nullable: true
          description: "(deprecated) use 'sexo'"
        morto:
          type: boolean
          nullable: true
        morte_detalhe:
          type: string
          nullable: true
        morte_tipo:
          type: string
          nullable: true
        penhorado:
          type: boolean
          nullable: true
        penhorado_e_pago:
          type: boolean
          nullable: true
        selos:
          type: array
          nullable: true
          items:
            type: string
        foto_principal:
          type: string
          format: uri
          nullable: true
          description: URL pública da foto principal (upload em /fileupload).
        data_nascimento:
          type: string
          format: date
          nullable: true
        origem:
          type: string
          nullable: true
        etiquetas:
          type: array
          nullable: true
          items:
            type: string
          description: "Lista de etiquetas (Bubble type: etiqueta) - IDs"
        local_nascimento:
          type: string
          nullable: true
        nome_mae:
          type: string
          nullable: true
        nome_pai:
          type: string
          nullable: true
        observacoes_nascimento:
          type: string
          nullable: true
        vinculo_pai:
          type: string
          nullable: true
        vinculo_mae:
          type: string
          nullable: true
        morte_foto:
          type: string
          format: uri
          nullable: true
          description: URL pública da foto de morte (upload em /fileupload).
        rfid:
          type: string
          nullable: true
        finalidade:
          type: string
          nullable: true
          description: "Option Set: finalidade_animal (valor do Option Set)"
        fazenda_local:
          type: string
          nullable: true
        lote:
          type: array
          nullable: true
          items:
            type: string
          description: "Lotes (Bubble type: lote) - IDs"
        peso_ideal:
          type: number
          nullable: true
        sobrepor_peso:
          type: boolean
          nullable: true
        Obs:
          type: string
          nullable: true
        data_desmane:
          type: string
          format: date
          nullable: true
        data_maturidade:
          type: string
          format: date
          nullable: true
        peso_desmame:
          type: number
          nullable: true
        peso_maturidade:
          type: number
          nullable: true
        peso_nascimento:
          type: number
          nullable: true
        pureza_raca:
          type: string
          nullable: true
        categoria:
          type: string
          nullable: true
          description: "Option Set: Categoria_animal (valor do Option Set)"
        proprietario:
          type: string
          nullable: true
          description: "Proprietário (Bubble type: colaboradores) - ID"
        latitude:
          type: string
          nullable: true
        longitude:
          type: string
          nullable: true
        data_cadastro:
          type: string
          format: date
          nullable: true
        sexo:
          type: string
          nullable: true
          description: "Option Set: animal_sex (valor do Option Set)"
        brinco_padrao:
          type: string
          nullable: true
        fazenda_pasto:
          type: string
          nullable: true
          description: "Fazenda pasto (Bubble type: fazenda_pastos) - ID"
        observacao:
          type: string
          nullable: true
        tipo_animal:
          type: string
          nullable: true
          description: "Option Set: Tipo_animal (valor do Option Set)"
        identificacao_eletronica:
          type: string
          nullable: true
        peso_atual:
          type: number
          nullable: true
        rgd:
          type: string
          nullable: true
        rgn_text:
          type: string
          nullable: true
        sisbov:
          type: string
          nullable: true
        status_saida:
          type: string
          nullable: true
          description: "Option Set: Animal_status_saida (valor do Option Set)"
      additionalProperties: false

    EditarAnimalResponse:
      type: object
      additionalProperties: true

    RegistrarMorteRequest:
      type: object
      required:
        - data
        - observacao
        - organizacao
        - causa_morte
        - animal
        - campo_alterado
        - criado_por
        - data_criacao
        - descricao
        - fazenda
        - origem_alteracao
        - unique_id_alteracao
        - valor_antes
        - valor_depois
        - colaborador
      properties:
        data:
          type: string
          format: date
        observacao:
          type: string
        organizacao:
          type: string
        causa_morte:
          type: string
        animal:
          type: string
        campo_alterado:
          type: string
        criado_por:
          type: string
          description: "User (Bubble type: User) - ID"
        data_criacao:
          type: string
          format: date
        descricao:
          type: string
        fazenda:
          type: string
        origem_alteracao:
          type: string
          description: "Option Set: Origem_alteracao (valor do Option Set)"
        unique_id_alteracao:
          type: string
        valor_antes:
          type: string
        valor_depois:
          type: string
        colaborador:
          type: string
          description: "Colaboradores (Bubble type: colaboradores) - ID"
        imagem:
          type: string
          format: uri
          nullable: true
          description: URL pública do arquivo/imagem (upload em /fileupload).
      additionalProperties: false

    RegistrarMorteResponse:
      type: object
      additionalProperties: true

    ReverterMorteRequest:
      type: object
      required:
        - data
        - observacao
        - organizacao
        - causa_morte
        - animal
        - campo_alterado
        - criado_por
        - data_criacao
        - descricao
        - fazenda
        - origem_alteracao
        - unique_id_alteracao
        - valor_antes
        - valor_depois
        - colaborador
      properties:
        data:
          type: string
          format: date
        observacao:
          type: string
        organizacao:
          type: string
        causa_morte:
          type: string
        animal:
          type: string
        campo_alterado:
          type: string
        criado_por:
          type: string
          description: "User (Bubble type: User) - ID"
        data_criacao:
          type: string
          format: date
        descricao:
          type: string
        fazenda:
          type: string
        origem_alteracao:
          type: string
          description: "Option Set: Origem_alteracao (valor do Option Set)"
        unique_id_alteracao:
          type: string
        valor_antes:
          type: string
        valor_depois:
          type: string
        colaborador:
          type: string
          description: "Colaboradores (Bubble type: colaboradores) - ID"
        imagem:
          type: string
          format: uri
          nullable: true
          description: URL pública do arquivo/imagem (upload em /fileupload).
      additionalProperties: false

    ReverterMorteResponse:
      type: object
      additionalProperties: true

    BuscarPesagensResponse:
      type: object
      additionalProperties: true

    DeletePesagemRequest:
      type: object
      required:
        - peso
      properties:
        peso:
          type: string
          description: "Pesagem (Bubble type: animal_peso) - ID"
        momento_pesa:
          type: string
          nullable: true
          description: "Momento (Option Set: momento_pes...) (opcional)"
      additionalProperties: false

    DeletePesagemResponse:
      type: object
      additionalProperties: true

    NovoAnimalPesoRequest:
      type: object
      required:
        - Animal
        - Data de Pesagem
        - Peso Kg
        - Tipo_equipamento
      properties:
        Animal:
          type: string
        Data de Pesagem:
          type: string
          format: date
        Peso Kg:
          type: number
        Tipo_equipamento:
          type: string
        momento_pesagem:
          type: string
          nullable: true
        user:
          type: string
          nullable: true
      additionalProperties: false

    NovoAnimalPesoResponse:
      type: object
      additionalProperties: true

    EditarAnimalPesoRequest:
      type: object
      required:
        - Animal_Peso
        - Data de Pesagem
        - Peso Kg
        - Tipo_equipamento
        - momento_pesagem
      properties:
        Animal_Peso:
          type: string
        Data de Pesagem:
          type: string
          format: date
          nullable: true
        Peso Kg:
          type: number
          nullable: true
        Tipo_equipamento:
          type: string
          nullable: true
        momento_pesagem:
          type: string
          nullable: true
      additionalProperties: false

    EditarAnimalPesoResponse:
      type: object
      additionalProperties: true

    BuscarVacinasResponse:
      type: object
      additionalProperties: true

    DeleteVacinaRequest:
      type: object
      required:
        - vacinacao
      properties:
        vacinacao:
          type: string
          description: "vacinas (Bubble type: vacinacao) - ID"
      additionalProperties: false

    DeleteVacinaResponse:
      type: object
      additionalProperties: true

    AplicarVacinaRequest:
      type: object
      required:
        - animal
        - vacina
        - data
        - observacao
      properties:
        animal:
          type: string
        vacina:
          type: string
        data:
          type: string
        prox_dose:
          type: string
          nullable: true
        observacao:
          type: string
        ultima_dose:
          type: boolean
          nullable: true
        responsavel:
          type: string
          nullable: true
        grupo:
          type: string
          nullable: true
        veterinario_yes:
          type: boolean
          nullable: true
        veterinario:
          type: string
          nullable: true
        lote:
          type: string
          nullable: true
        carencia:
          type: number
          nullable: true
        evidencia:
          type: string
          nullable: true
        assinatura_veter:
          type: string
          format: uri
          nullable: true
          description: URL pública da assinatura do veterinário (upload em /fileupload).
        foto_aplicacao:
          type: string
          format: uri
          nullable: true
          description: URL pública da foto da aplicação (upload em /fileupload).
        foto_nota_fiscal:
          type: string
          format: uri
          nullable: true
          description: URL pública da nota fiscal (upload em /fileupload).
        latitude:
          type: string
          nullable: true
        longitude:
          type: string
          nullable: true
      additionalProperties: false

    AplicarVacinaResponse:
      type: object
      required:
        - status
        - response
      properties:
        status:
          type: string
          example: success
        response:
          type: object
          additionalProperties: true
      additionalProperties: false

    EditarVacinaRequest:
      type: object
      required:
        - vacinacao
      properties:
        vacinacao:
          type: string
          description: "vacinas (Bubble type: vacinacao) - ID"
        data:
          type: string
          format: date
          nullable: true
        prox_dose:
          type: string
          format: date
          nullable: true
        observacoes:
          type: string
          nullable: true
        ultima_dose:
          type: boolean
          nullable: true
          description: Campo yes/no do Bubble
        responsavel:
          type: string
          nullable: true
          description: "Responsável (Bubble type: User) - ID"
        veterinario:
          type: string
          nullable: true
        responsavel_vet:
          type: boolean
          nullable: true
        latitude:
          type: string
          nullable: true
        longitude:
          type: string
          nullable: true
        animal:
          type: string
          nullable: true
          description: "Animal (Bubble type: animal) - ID"
        vacina:
          type: string
          nullable: true
          description: "Option Set: Tipo_vacina (valor do Option Set)"
      additionalProperties: false

    EditarVacinaResponse:
      type: object
      required:
        - status
        - response
      properties:
        status:
          type: string
          example: success
        response:
          type: object
          additionalProperties: true
      additionalProperties: false

    DesaplicarVacinacaoRequest:
      type: object
      required:
        - vacinacao
      properties:
        vacinacao:
          type: string
      additionalProperties: false

    DesaplicarVacinacaoResponse:
      type: object
      required:
        - status
        - response
      properties:
        status:
          type: string
          example: success
        response:
          type: object
          additionalProperties: true
      additionalProperties: false

    BuscarMedicamentosResponse:
      type: object
      additionalProperties: true

    CancelarMedicamentoRequest:
      type: object
      required:
        - medicamento
      properties:
        medicamento:
          type: string
      additionalProperties: false

    CancelarMedicamentoResponse:
      type: object
      additionalProperties: true

    CriarMedicamentoRequest:
      type: object
      required:
        - animal
        - data_aplicacao
        - status
        - remedio
        - metodo
        - prescricao
        - usuario
      properties:
        animal:
          type: string
          description: "Animal (Bubble type: animal) - ID"
        data_aplicacao:
          type: string
          format: date
        status:
          type: string
          description: "Option Set (ex.: OS:repro_Medica...)"
        remedio:
          type: string
          description: "Option Set (ex.: OS:repro_Medica...)"
        responsavel_use:
          type: string
          nullable: true
          description: Texto livre (conforme parâmetro do Bubble)
        metodo:
          type: string
          description: "Option Set (ex.: OS:repro_Medica...)"
        prescricao:
          type: string
          description: "Option Set (ex.: OS:repro_Medica...)"
        obs:
          type: string
          nullable: true
        receita:
          type: string
          format: uri
          nullable: true
          description: URL pública do arquivo (faça upload em /fileupload e use a URL retornada).
        responsavel_vet:
          type: string
          nullable: true
          description: Texto livre (conforme parâmetro do Bubble)
        usuario:
          type: string
          description: "User (Bubble type: User) - ID"
        lote:
          type: string
          nullable: true
          description: "Lote (Bubble type: lote) - ID (opcional)"
      additionalProperties: false

    CriarMedicamentoResponse:
      type: object
      additionalProperties: true

    AtualizarMedicamentoRequest:
      type: object
      required:
        - medicamento
      properties:
        medicamento:
          type: string
          description: "Medicamento (Bubble type: medicamento) - ID"
        data_aplicacao:
          type: string
          format: date
          nullable: true
        obs:
          type: string
          nullable: true
        receita:
          type: string
          format: uri
          nullable: true
          description: URL pública do arquivo (faça upload em /fileupload e use a URL retornada).
        animal:
          type: string
          nullable: true
          description: "Animal (Bubble type: animal) - ID (opcional)"
        fazenda:
          type: string
          nullable: true
          description: "Fazenda (Bubble type: fazenda) - ID (opcional)"
        remedio:
          type: string
          nullable: true
          description: "Option Set (ex.: OS:repro_Medica...)"
        metodo:
          type: string
          nullable: true
          description: "Option Set (ex.: OS:repro_Medica...)"
        prescricao:
          type: string
          nullable: true
          description: "Option Set (ex.: OS:repro_Medica...)"
        responsavel:
          type: string
          nullable: true
        status:
          type: string
          nullable: true
          description: "Option Set (ex.: OS:repro_Medica...)"
        tipo:
          type: string
          nullable: true
          description: "Option Set (ex.: OS:repro_Medica...)"
      additionalProperties: false

    AtualizarMedicamentoResponse:
      type: object
      additionalProperties: true

    AplicarMedicamentoRequest:
      type: object
      required:
        - data_aplicacao
        - obs
        - medicamento
        - usuario
      properties:
        data_aplicacao:
          type: string
          format: date
        responsavel_use:
          type: string
          nullable: true
          description: Texto livre (conforme parâmetro do Bubble)
        obs:
          type: string
        receita:
          type: string
          format: uri
          nullable: true
          description: URL pública do arquivo (faça upload em /fileupload e use a URL retornada).
        medicamento:
          type: string
          description: "Medicamento (Bubble type: medicamento) - ID"
        usuario:
          type: string
          description: "User (Bubble type: User) - ID"
        lote:
          type: string
          nullable: true
          description: "Lote (Bubble type: lote) - ID (opcional)"
      additionalProperties: false

    AplicarMedicamentoResponse:
      type: object
      additionalProperties: true
